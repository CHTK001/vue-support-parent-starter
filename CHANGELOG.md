# 更新日志

本文档记录了项目的所有重要更改。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [2.0.4] - 2025-01-17

### 新增
- **ScSwitch**: 新增现代化布局样式 (`modern`)
  - 添加 ModernLayout 组件，提供更现代化的开关设计
  - 支持渐变背景、阴影效果和平滑动画
  - 兼容所有现有属性：尺寸、颜色、图标、文本等
  - 在示例页面中添加现代布局演示

### 改进
- **ScSwitch**: 扩展布局选项，现在支持 `default`、`card`、`slider`、`modern` 四种布局
- **ScSwitchExample**: 更新示例页面，展示新的现代布局效果

## [2.0.3] - 2025-01-17

### 修复
- **ScSearch**: 修复组件垂直居中对齐问题，确保在容器中正确垂直居中显示
- **ScSearch**: 优化表单项和按钮区域的垂直对齐逻辑

### 改进
- **ScSearch**: 改进组件在不同容器中的布局表现
- **HolidayIndex**: 优化搜索区域的布局结构

## [2.0.2] - 2025-01-17

### 修复
- **ScSearch**: 修复 `width` 属性不生效的问题，现在可以正确设置表单项宽度
- **ScSearch**: 优化表单项样式绑定逻辑，避免固定class覆盖自定义宽度

### 改进
- **ScSearch**: 完善width属性文档说明和使用示例
- **ScSearch**: 新增自定义宽度演示页面

## [2.0.1] - 2025-01-17

### 新增
- **ScSearch组件**: 按钮显示模式控制
  - 新增 `buttonMode` 参数，支持 'icon'（只显示图标）和 'text'（显示图标+文字）两种模式
  - 默认模式为 'icon'，提供更简洁的界面
  - 默认只显示搜索和重置按钮，编辑按钮需要手动开启

### 改进
- **ScSearch组件**: 优化默认配置
  - `showEdit` 默认值改为 `false`，减少不必要的按钮显示
  - 更新文档和示例，展示新的按钮模式用法

## [2.0.0] - 2025-01-17

### 新增 (Added)

#### ScSearch 搜索组件 v2.0.0

- **重大重构**: 从 Options API 重构为 Composition API + TypeScript
- **新增表单控件类型**:
  - 时间选择器 (`time`)
  - 时间范围选择器 (`timerange`)
  - 级联选择器 (`cascader`)
  - 开关控件 (`switch`)
  - 复选框组 (`checkbox`)
- **新增功能特性**:
  - 防抖搜索功能 (可配置延迟时间)
  - 表单验证支持 (支持自定义验证规则)
  - v-model 双向绑定支持
  - 组件方法暴露 (`validateForm`, `clearForm`, `setFormData`, `getFormData`, `resetForm`)
  - 自定义插槽支持
  - 管理员权限控制
- **新增配置选项**:
  - `enableDebounce`: 是否启用防抖搜索
  - `debounceDelay`: 防抖延迟时间
  - `showReset`: 是否显示重置按钮
  - `showEdit`: 是否显示编辑按钮
  - `rules`: 表单验证规则
  - `modelValue`: 支持 v-model
- **新增事件**:
  - `update:modelValue`: 表单数据更新事件
  - `search`: 搜索事件
  - `reset`: 重置事件
  - `edit`: 编辑事件

#### WebRTC 监控模块

- **新增 API 函数**: `getRoomHistory` - 获取房间历史数据
  - 支持按房间ID查询历史数据
  - 支持时间范围筛选
  - 返回用户数量变化、持续时间、事件记录等信息

#### Holiday 节假日模块

- **完整模块实现**:
  - 节假日数据展示页面
  - 基于 Element Plus Calendar 的日历组件
  - 节假日数据同步功能
  - API 接口封装
  - 路由配置
  - 模块配置文件

### 改进 (Changed)

#### ScSearch 搜索组件

- **界面优化**:
  - 改进响应式布局，更好适配移动端
  - 优化按钮间距和布局
  - 增强无障碍访问支持
  - 改进键盘导航体验
- **性能优化**:
  - 使用 `computed` 优化计算属性
  - 优化事件监听和内存使用
  - 改进组件渲染性能
- **代码质量**:
  - 完整的 TypeScript 类型定义
  - 更好的代码组织和模块化
  - 增加详细的代码注释

#### 项目结构

- **文档完善**:
  - 新增项目根目录 README.md
  - 新增 ScSearch 组件详细文档
  - 新增组件使用示例文件
  - 新增更新日志文档

### 修复 (Fixed)

#### ScSearch 搜索组件

- 修复表单重置时数据不正确的问题
- 修复展开/收起状态管理问题
- 修复图标显示异常问题
- 修复表单验证时机问题
- 修复响应式布局在小屏幕设备上的显示问题

#### WebRTC 监控模块

- 修复 `getRoomHistory` 函数缺失问题
- 修复 API 导入路径错误 (`@/api/webrtc` → `@/api/webrtc/statistics`)
- 修复语法错误和多余字符问题

### 移除 (Removed)

#### ScSearch 搜索组件

- 移除 Options API 相关代码
- 移除过时的数据绑定方式
- 移除不必要的 Vue 2 兼容代码

### 安全性 (Security)

- 所有新增代码遵循安全最佳实践
- 表单验证增强，防止恶意输入
- 组件暴露的方法进行安全检查

---

## [1.x.x] - 历史版本

### ScSearch 组件 v1.x.x

- 基础功能实现
- 支持基本表单控件类型 (input, select, datepicker, radio, number)
- Options API 实现
- 基础的展开/收起功能
- 简单的搜索和重置功能

### WebRTC 监控模块 v1.x.x

- 基础监控功能
- 系统统计 API
- 房间统计 API
- 实时监控功能

### Holiday 节假日模块 v1.x.x

- 基础页面结构
- 简单的 API 接口定义

---

## 版本说明

### 版本号格式

本项目使用 [语义化版本](https://semver.org/lang/zh-CN/) 格式：`主版本号.次版本号.修订号`

- **主版本号**: 当你做了不兼容的 API 修改
- **次版本号**: 当你做了向下兼容的功能性新增
- **修订号**: 当你做了向下兼容的问题修正

### 更新类型说明

- **新增 (Added)**: 新功能
- **改进 (Changed)**: 对现有功能的更改
- **弃用 (Deprecated)**: 即将移除的功能
- **移除 (Removed)**: 已移除的功能
- **修复 (Fixed)**: 任何 bug 修复
- **安全性 (Security)**: 安全相关的修复和改进

### 重要提示

- 🚨 **重大更新**: 可能包含破坏性更改，升级前请仔细阅读文档
- ✨ **新功能**: 新增的功能特性
- 🐛 **问题修复**: 修复的 bug 和问题
- 📚 **文档更新**: 文档相关的更改
- 🎨 **界面优化**: UI/UX 相关的改进
- ⚡ **性能优化**: 性能相关的改进
- 🔒 **安全更新**: 安全相关的修复

---

## 贡献指南

如果您想为本项目贡献代码，请遵循以下规范：

1. **提交信息格式**:
   ```
   <类型>(<范围>): <描述>
   
   <详细描述>
   
   <相关问题>
   ```

2. **类型说明**:
   - `feat`: 新功能
   - `fix`: 修复 bug
   - `docs`: 文档更新
   - `style`: 代码格式调整
   - `refactor`: 代码重构
   - `test`: 测试相关
   - `chore`: 构建过程或辅助工具的变动

3. **范围说明**:
   - `ScSearch`: ScSearch 组件
   - `WebRTC`: WebRTC 监控模块
   - `Holiday`: 节假日模块
   - `docs`: 文档
   - `build`: 构建系统

4. **示例**:
   ```
   feat(ScSearch): 添加级联选择器支持
   
   - 新增 cascader 类型支持
   - 添加 cascaderProps 配置选项
   - 更新类型定义和文档
   
   Closes #123
   ```

---

## 联系方式

如有问题或建议，请通过以下方式联系我们：

- 提交 Issue
- 发起 Pull Request
- 联系开发团队

感谢您对本项目的关注和贡献！