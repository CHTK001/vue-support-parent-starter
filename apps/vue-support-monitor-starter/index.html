<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="renderer" content="webkit" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=0" />
    <title>后台系统</title>
    <link rel="icon" href="/favicon.ico" />
    <script>
      // 在页面加载早期检测并设置深色主题，避免FOUC问题
      (function() {
        try {
          // 从localStorage中读取布局配置
          const layoutConfig = JSON.parse(localStorage.getItem('layout') || '{}');
          // 如果配置了深色模式，则添加dark类到html元素
          if (layoutConfig.darkMode) {
            document.documentElement.classList.add('dark');
          }
        } catch (e) {
          console.warn('Failed to set dark theme from localStorage:', e);
        }
      })();
      
      window.process = {};
      window.agentPath = "/agent";
      window.websocketPort="28954";
    </script>
    <style>
      /* 在CSS加载之前确保有正确的背景色 */
      html, body, #app {
        background-color: #f5f7fa; /* 默认浅色背景 */
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
      }
      
      /* 深色主题下的背景色 */
      html.dark, html.dark body, html.dark #app {
        background-color: #020409; /* 深色背景，与dark.scss中的一致 */
      }
      
      /* 确保在加载过程中有正确的背景色 */
      .app-wrapper {
        background-color: #f5f7fa;
      }
      
      html.dark .app-wrapper {
        background-color: #020409;
      }
      
      /* 确保app-main类也有正确的背景色 */
      .app-main, .app-main-nofixed-header {
        background-color: #f5f7fa;
      }
      
      html.dark .app-main, html.dark .app-main-nofixed-header {
        background-color: #020409;
      }
    </style>
  </head>

  <body>
    <div id="app">
      <style>
        html,
        body,
        #app {
          position: relative;
          display: flex;
          align-items: center;
          justify-content: center;
          width: 100%;
          height: 100%;
          color: #000;
          overflow: hidden;
        }

        .loader,
        .loader::before,
        .loader::after {
          width: 2.5em;
          height: 2.5em;
          border-radius: 50%;
          animation: load-animation 1.8s infinite ease-in-out;
          animation-fill-mode: both;
        }

        .loader {
          position: relative;
          top: 0;
          margin: 80px auto;
          font-size: 10px;
          color: #406eeb;
          text-indent: -9999em;
          transform: translateZ(0);
          transform: translate(-50%, 0);
          animation-delay: -0.16s;
        }

        .loader::before,
        .loader::after {
          position: absolute;
          top: 0;
          content: "";
        }

        .loader::before {
          left: -3.5em;
          animation-delay: -0.32s;
        }

        .loader::after {
          left: 3.5em;
        }

        @keyframes load-animation {

          0%,
          80%,
          100% {
            box-shadow: 0 2.5em 0 -1.3em;
          }

          40% {
            box-shadow: 0 2.5em 0 0;
          }
        }
      </style>
      <div class="loader"></div>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>

</html>