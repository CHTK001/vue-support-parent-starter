# 更新日志

## [最新更新] - 2025-08-18

### 数据管理控制台 - RedisConsole 重构

- 左侧与 JDBC 控制台保持一致：采用树形结构（数据库/Key），复用统一接口：/root、/children、/node
- 右侧根据 Key 类型展示不同视图：
  - string：多行只读文本
  - hash：键值表格
  - list：序号+值列表
  - set：成员列表
  - zset：成员+分数表格
- 支持左/右分栏拖拽与刷新当前值
- 不改变后端接口，仅前端视图与交互对齐

### 修改的文件

- src/views/data-management/console/RedisConsole.vue

### 数据管理设置编辑页

- 控制台类型改为“启用控制台”开关，关闭时提交空的 consoleType
- 远程模式（REMOTE）下新增必填规则：需填写“地址(连接串)”或“主机+端口”
- 后端新增接口：POST /system/data/setting/save（含校验）

## [最新更新] - 2025-01-18

### 文件存储配置优化

#### 🎨 界面改进

- **存储列表重设计**: 参考 PreviewFull.vue 的设计风格，重新设计了存储配置列表
  - 采用三行布局：类型标签、路径信息、操作按钮
  - 添加存储类型图标显示

### 控制台新增/对齐

- ZooKeeper 控制台：参考 Redis 风格重构，统一左侧树/右侧内容区布局与交互
- InfluxDB 控制台：参考 JDBC 风格新增，支持 Flux 查询执行与结果表格展示；路由：/data/console/influx?id=xxx

  - 优化选中状态的视觉效果
  - 添加悬停效果和过渡动画

#### 🔧 功能增强

- **智能表单验证**: 根据存储类型动态调整验证规则
  - FILESYSTEM 类型：只需要根路径配置
  - 对象存储类型：需要端点、存储桶、访问密钥等完整配置
- **配置提示优化**: 为不同存储类型添加详细的配置说明
  - S3: AWS S3 端点和区域说明
  - MinIO: MinIO 服务端点说明
  - 阿里云 OSS: 阿里云端点和区域说明
- **新增功能**:
  - 连接测试按钮：测试存储配置的连通性
  - 基础路径配置：支持在存储桶内设置基础路径前缀
  - 启用状态开关：可以快速启用/禁用存储配置

#### 🎯 用户体验

- **视觉一致性**: 与 PreviewFull.vue 保持一致的设计语言
- **操作便捷性**:
  - 一键测试连接
  - 直观的启用/禁用状态
  - 清晰的配置分类和说明
- **响应式设计**: 支持不同屏幕尺寸的适配

#### 🛠 技术改进

- **样式优化**:
  - 添加 thin-scrollbar 样式类
  - 统一的表单提示样式
  - 改进的存储项布局样式
- **代码结构**:
  - 新增 getStorageIcon 函数用于图标映射
  - 新增 testConnection 函数用于连接测试
  - 优化表单验证逻辑

### 修改的文件

- `src/views/service-management/components/FilterConfigFileStorage.vue`
  - 重构存储列表显示组件
  - 优化表单配置界面
  - 添加新的样式和功能

### 兼容性

- 保持与现有 API 的完全兼容
- 向后兼容现有的存储配置数据结构
- 支持所有现有的存储类型（FILESYSTEM、S3、MinIO、阿里云 OSS 等）
