/**
 * 元旦主题 - 自定义弹出菜单样式
 * 冰蓝色主题，支持通过类名或 data-skin 选择器应用
 */

// 颜色变量
$ice-lightest: #F5FBFF;
$ice-lighter: #E8F4FC;
$ice-light: #B8E0F2;
$ice-medium: #7CC2E8;
$ice-primary: #4EA8DE;
$ice-deep: #2A7AB8;
$ice-darker: #1E5F8C;
$frost-purple: #E0E7F5;
$frost-white: #FFFFFF;

// 弹出层样式 mixin
@mixin new-year-popper-styles {
  background: linear-gradient(180deg, rgba($ice-lightest, 0.98), rgba($frost-purple, 0.96)) !important;
  border: 1px solid rgba($ice-medium, 0.25) !important;
  border-radius: 12px !important;
  box-shadow: 
    0 8px 32px rgba($ice-deep, 0.15),
    0 4px 16px rgba($ice-primary, 0.1),
    inset 0 1px 0 rgba($frost-white, 0.5) !important;
  backdrop-filter: blur(16px);
  padding: 8px !important;
  overflow: visible;
  
  // 顶部冰晶线
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 12px;
    right: 12px;
    height: 2px;
    background: linear-gradient(90deg, transparent, $ice-medium 20%, $ice-primary 50%, $ice-medium 80%, transparent);
    border-radius: 0 0 2px 2px;
  }
}

// 弹出层内菜单项样式 mixin
@mixin new-year-popper-menu-items {
  .custom-menu-item {
    height: 40px;
    padding: 0 14px;
    margin: 3px 0;
    color: $ice-darker;
    background: transparent;
    border-radius: 8px;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    
    .menu-icon {
      color: $ice-primary;
    }
    
    .menu-title {
      font-size: 14px;
      font-weight: 500;
    }
    
    &:hover:not(.is-disabled) {
      background: rgba($ice-medium, 0.15);
      color: $ice-deep;
      transform: translateX(2px);
      
      .menu-icon {
        color: $ice-deep;
      }
    }
    
    &.is-active {
      background: linear-gradient(135deg, $ice-primary, $ice-medium);
      color: $frost-white;
      box-shadow: 0 3px 12px rgba($ice-primary, 0.35);
      
      .menu-icon, .menu-title {
        color: $frost-white;
      }
    }
    
    &.is-disabled {
      color: rgba($ice-darker, 0.4);
      background: rgba($frost-white, 0.3);
    }
  }
  
  // 子菜单样式
  .custom-sub-menu {
    .custom-sub-menu__title {
      height: 40px;
      padding: 0 14px;
      margin: 3px 0;
      border-radius: 8px;
      color: $ice-darker;
      
      .menu-icon {
        color: $ice-primary;
      }
      
      .custom-sub-menu__icon-arrow {
        color: $ice-primary;
      }
      
      &:hover {
        background: rgba($ice-medium, 0.12);
        color: $ice-deep;
        
        .menu-icon {
          color: $ice-deep;
        }
      }
    }
    
    &.is-active > .custom-sub-menu__title {
      background: linear-gradient(135deg, $ice-primary, $ice-medium);
      color: $frost-white;
      box-shadow: 0 3px 12px rgba($ice-primary, 0.35);
      
      .menu-icon, .menu-title, .custom-sub-menu__icon-arrow {
        color: $frost-white;
      }
    }
  }
}

// === 通过类名应用样式（用于 Teleport 到 body 的弹出层） ===
.new-year-custom-popper {
  @include new-year-popper-styles;
  @include new-year-popper-menu-items;
}

// 嵌套弹出层（二级及以上）
.new-year-custom-popper .custom-sub-menu__popper {
  @include new-year-popper-styles;
  @include new-year-popper-menu-items;
}

// === 通过 data-skin 应用样式（兼容全局主题切换） ===
html[data-skin="new-year"] {
  .custom-sub-menu__popper {
    @include new-year-popper-styles;
    @include new-year-popper-menu-items;
  }
}
