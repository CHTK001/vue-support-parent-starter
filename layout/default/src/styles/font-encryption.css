/**
 * 字体加密样式
 * @description 通过@font-face自定义字体实现真正的字体加密，防止复制
 * @author CH
 * @date 2025-12-16
 */

/**
 * 自定义字体定义
 * 字体文件将字母a-j显示为数字0-9，将其他字母显示为对应汉字
 * 注意：字体文件需要通过 generate_font.py 脚本生成
 */
@font-face {
  font-family: 'FontEncryption';
  src: url('../assets/fonts/font-encryption.woff2') format('woff2'),
       url('../assets/fonts/font-encryption.woff') format('woff'),
       url('../assets/fonts/font-encryption.ttf') format('truetype');
  font-display: swap;
  /* 指定字体支持的字符范围 */
  unicode-range: U+0020-007F, U+00A0-00FF, U+E000-E0FF;
}

/**
 * 字体加密类
 * 当启用字体加密时，应用此类到需要加密的元素
 */
.font-encryption-enabled {
  font-family: 'FontEncryption', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/**
 * 字体映射规则
 * 将 Unicode 私有区域的字符映射回原始字符显示
 * 
 * 注意：实际字体文件需要通过工具生成
 * 这里使用 CSS 的 unicode-range 和 font-feature-settings 来实现
 */
.font-encryption-enabled {
  font-feature-settings: 'liga' off, 'kern' off;
  text-rendering: optimizeLegibility;
}

/**
 * 全局字体加密开关
 * 当配置启用时，自动应用到 body
 */
body.font-encryption-global {
  font-family: 'FontEncryption', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif;
}

/**
 * 特定元素字体加密
 * 可以针对特定元素启用加密
 */
.font-encryption-numbers {
  font-family: 'FontEncryption', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif;
}

.font-encryption-chinese {
  font-family: 'FontEncryption', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif;
}

/**
 * 禁用文本选择（增强防复制效果）
 * 注意：这会影响用户体验，建议仅在必要时使用
 */
.font-encryption-no-select {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -webkit-touch-callout: none;
}

/**
 * 禁用右键菜单（增强防复制效果）
 * 注意：这会影响用户体验，建议仅在必要时使用
 */
.font-encryption-no-context {
  -webkit-touch-callout: none;
}

/**
 * OCR 噪点（用于干扰 OCR）
 * 说明：
 * - 人眼尽量不可察觉：低透明度、小尺寸、轻微模糊
 * - 仅叠加在目标元素区域，不影响点击与选择（pointer-events: none）
 */
.font-encryption-ocr-noise {
  position: relative;
}

.font-encryption-ocr-noise::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 1;
  opacity: var(--fe-ocr-noise-opacity, 0.025);
  background-image:
    radial-gradient(circle at var(--fe-ocr-noise-x1, 12%) var(--fe-ocr-noise-y1, 18%), rgba(0, 0, 0, 0.35) 0.45px, transparent 0.55px),
    radial-gradient(circle at var(--fe-ocr-noise-x2, 62%) var(--fe-ocr-noise-y2, 68%), rgba(0, 0, 0, 0.25) 0.45px, transparent 0.55px),
    radial-gradient(circle at var(--fe-ocr-noise-x3, 32%) var(--fe-ocr-noise-y3, 44%), rgba(0, 0, 0, 0.20) 0.45px, transparent 0.55px);
  background-size: var(--fe-ocr-noise-size, 3px) var(--fe-ocr-noise-size, 3px);
  filter: blur(0.2px);
}

