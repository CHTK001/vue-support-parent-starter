# 更新日志

## [Unreleased] - 2026-02-05

### 📱 移动端布局重构 (Mobile Layout Refactor)
- **菜单重构**: 使用 `el-menu` 和 `DefaultSidebarItem` 重构移动端侧边栏菜单，支持无限层级子菜单渲染，与 PC 端菜单逻辑保持一致。
- **系统设置集成**: 移动端导航栏新增系统设置按钮，支持在移动端唤起系统设置面板。
- **样式统一**: 修复移动端菜单在白色主题下的激活样式，统一使用 `--el-color-primary`。

### 🔧 组件功能增强
- **BaseSidebarItem**: 新增 `collapse` 属性，支持强制覆盖全局折叠状态，解决移动端抽屉内菜单渲染问题。
- **DefaultSidebarItem**: 同步新增 `collapse` 属性并透传给基础组件。

### 🐛 问题修复
- **主题适配**: 修复白色主题下激活菜单背景色不统一的问题。
- **交互优化**: 修复系统设置图标悬停模糊问题。
- **逻辑优化**: 节日主题自动切换默认关闭，支持手动切换主题时自动关闭该功能；修正春节检测日期范围。

### 🏠 首页优化 (Home Page Enhancements)
- **添加组件页面美化**: 优化了首页添加组件侧边栏的 UI 设计，采用 Glassmorphism 风格，提升视觉体验。
- **实时预览**: 新增本地组件实时预览功能，替代原有的占位符图标，让用户在添加组件时能直接看到组件效果。
- **时间显示优化**: 首页头部时间显示精确到秒 (HH:mm:ss)。

### 🚀 性能监控增强 (Performance Monitor)
- **全局启用**: 性能监控 (FPS Monitor) 现在作为全局功能设置，适用于所有主题（不仅限于赛博朋克主题）。
- **设置迁移**: 在系统设置面板的"功能设置"中新增 FPS 显示开关，移除 Cyberpunk 主题面板中的重复设置。
- **状态持久化**: FPS 监控开启状态通过 Pinia 和 localStorage (sys-fps-monitor-enabled) 持久化存储，并支持从配置文件 (ShowFpsMonitor) 读取默认值。
- **组件重构**: `lay-performance` 组件拆分为独立的子组件 (`FpsItem`, `CpuItem`, `MemoryItem`, `BandwidthItem`, `BatteryItem`, `BluetoothItem`, `ScreenItem`)，提高代码可维护性和复用性。
- **蓝牙监控**: 新增蓝牙功能监控 (`BluetoothItem`)，支持检测浏览器蓝牙 API 可用性并显示连接状态 (需要浏览器支持 Web Bluetooth API)。
- **屏幕监控**: 新增屏幕分辨率监控 (`ScreenItem`)，实时显示当前屏幕分辨率 (Width x Height)。

### 🎨 主题与样式
- **Cyberpunk 修复**: 修复 Cyberpunk 主题设置面板中的重复开关和冗余样式，保持代码整洁。
- **系统设置**: 保持系统设置面板在原有抽屉 (Drawer) 中显示，不占用 lay-context 空间，确保一致的用户体验。

## [v2.1.0] - 2025-01-17

### ✨ 新增功能

#### 双栏导航模式 (Double Navigation)
- **新增双栏导航布局**: 左右双栏设计，左栏显示一级菜单图标，右栏显示对应子菜单
- **子菜单展开控制**: 支持两种展开模式
  - 自动展开模式：子菜单自动展开，无法手动收缩，适合快速浏览
  - 手动展开模式：用户可以手动控制子菜单的展开和收缩，提供更多控制权
- **响应式设计**: 完美适配桌面端和移动端
- **折叠支持**: 支持侧边栏折叠，折叠后左栏宽度为54px
- **主题适配**: 完美支持亮色和暗色主题切换

#### 系统设置增强
- **双栏导航配置**: 在系统设置中新增双栏导航相关配置选项
  - 子菜单展开模式选择（自动/手动）
  - 自动展开全部子菜单开关
- **配置持久化**: 双栏导航配置自动保存到本地存储

#### 组件架构优化
- **新增NavDouble组件**: 专门的双栏导航组件，提供完整的双栏布局功能
- **新增DoubleNavSidebarItem组件**: 专门处理双栏导航中的菜单项渲染和交互
- **布局系统集成**: 完整集成到现有布局系统中，与其他导航模式无缝切换

### 🎨 样式优化

#### 双栏导航样式
- **现代化设计**: 采用圆角、阴影、渐变等现代设计元素
- **交互动效**: 丰富的hover效果和过渡动画
- **视觉层次**: 清晰的视觉层次和间距设计
- **主题变量**: 完整使用CSS变量，支持主题切换

#### 响应式适配
- **移动端优化**: 移动端下双栏导航自动适配为抽屉式布局
- **折叠状态**: 折叠状态下的样式优化和动画效果
- **触摸友好**: 移动端触摸交互优化

### 🔧 技术改进

#### 代码质量
- **TypeScript支持**: 完整的TypeScript类型定义
- **组合式API**: 使用Vue 3 Composition API重构
- **性能优化**: 优化组件渲染性能和内存使用

#### 配置管理
- **类型安全**: 配置项的完整类型定义
- **默认值**: 合理的默认配置值
- **验证机制**: 配置项的验证和错误处理

### 📚 文档更新

#### README文档
- **双栏导航说明**: 详细的双栏导航功能介绍
- **配置指南**: 双栏导航的配置和使用说明
- **最佳实践**: 使用建议和最佳实践

#### 代码注释
- **组件注释**: 完整的组件和方法注释
- **类型注释**: 详细的TypeScript类型注释
- **使用示例**: 代码中的使用示例和说明

### 🐛 问题修复

- **导航状态同步**: 修复导航状态在不同模式间切换时的同步问题
- **样式冲突**: 解决与其他导航模式的样式冲突
- **移动端适配**: 修复移动端下的显示和交互问题

### 🔄 兼容性

- **向后兼容**: 完全兼容现有的导航模式和配置
- **平滑升级**: 现有项目可以无缝升级使用双栏导航
- **配置迁移**: 自动处理配置迁移和默认值设置

---

## [未发布] - 2025-01-14

### 新增功能
- ✨ **系统配置面板全面美化**
  - 新增导航模式详细说明卡片，包含中文说明和图标
  - 添加实时预览功能，当前选中的导航模式会高亮显示
  - 为每种导航模式添加详细的功能说明和使用场景

- ✨ **界面显示设置重构**
  - 将设置选项按功能分组：视觉效果、界面元素、功能设置
  - 为每个开关选项添加详细的功能说明
  - 优化设置项的布局和视觉层次

- ✨ **高级设置区域**
  - 新增性能优化设置（组件缓存）
  - 新增用户体验设置（页面拉伸）
  - 新增开发者选项（调试模式）
  - 新增配置管理功能（导出/导入/重置）

- ✨ **配置管理功能**
  - 一键重置所有设置到默认状态
  - 导出当前配置为JSON文件
  - 从JSON文件导入配置
  - 支持配置的备份和恢复

### 界面优化
- 🎨 **现代化设计语言**
  - 采用玻璃态效果和模糊背景
  - 添加动态渐变装饰和装饰线
  - 优化悬停、点击等微交互效果
  - 改进响应式设计，适配不同屏幕尺寸

- 🎨 **色彩系统优化**
  - 完美适配亮色和暗色主题
  - 使用更丰富的色彩层次表达信息层级
  - 添加流畅的过渡动画效果

### 技术改进
- 🔧 **组件结构优化**
  - 重构设置面板组件结构
  - 添加新的样式类和组件
  - 优化代码组织和可维护性

- 🔧 **功能增强**
  - 新增多个配置管理方法
  - 改进设置项的数据绑定
  - 优化性能和用户体验

### 导航模式说明
- **纵向布局**：经典侧边栏导航，适合功能丰富的管理系统
- **横向布局**：顶部导航栏设计，充分利用屏幕宽度
- **混合布局**：结合顶部和侧边导航优势
- **悬停导航**：极简设计，鼠标悬停展开子菜单
- **卡片导航**：以卡片形式展示所有功能模块

### 文件变更
- `layout/default/src/components/lay-setting/index.vue` - 主要配置面板组件
- `docs/系统配置美化说明.md` - 详细的功能说明文档

### 兼容性
- ✅ 支持所有现代浏览器
- ✅ 完美适配移动端设备
- ✅ 兼容亮色和暗色主题
- ✅ 支持多语言环境

---

## 历史版本

### [1.0.0] - 2024-12-01
- 🎉 初始版本发布
- ✨ 基础系统配置功能
- 🎨 基础界面设计
