/**
 * SCSS 混入函数
 * 提供常用的样式混入，简化开发
 * @author CH
 * @date 2025-12-02
 */

@use 'sass:math';

// ==================== 布局混入 ====================

/// Flexbox 居中
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

/// Flexbox 垂直居中
@mixin flex-align-center {
  display: flex;
  align-items: center;
}

/// Flexbox 两端对齐
@mixin flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

/// Flexbox 列布局
@mixin flex-column {
  display: flex;
  flex-direction: column;
}

/// 绝对定位居中
@mixin absolute-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

/// 绝对定位填满
@mixin absolute-fill {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}

// ==================== 文本混入 ====================

/// 文本溢出省略（单行）
@mixin text-ellipsis {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/// 文本溢出省略（多行）
/// @param {Number} $lines - 行数
@mixin text-ellipsis-lines($lines: 2) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

// ==================== 响应式混入 ====================

/// 媒体查询 - 最小宽度
/// @param {String} $breakpoint - 断点名称
@mixin media-min($breakpoint) {
  $breakpoints: (
    'xs': 480px,
    'sm': 640px,
    'md': 768px,
    'lg': 1024px,
    'xl': 1280px,
    '2xl': 1536px
  );
  
  @if map-has-key($breakpoints, $breakpoint) {
    @media (min-width: map-get($breakpoints, $breakpoint)) {
      @content;
    }
  }
}

/// 媒体查询 - 最大宽度
/// @param {String} $breakpoint - 断点名称
@mixin media-max($breakpoint) {
  $breakpoints: (
    'xs': 479px,
    'sm': 639px,
    'md': 767px,
    'lg': 1023px,
    'xl': 1279px,
    '2xl': 1535px
  );
  
  @if map-has-key($breakpoints, $breakpoint) {
    @media (max-width: map-get($breakpoints, $breakpoint)) {
      @content;
    }
  }
}

// ==================== 动画混入 ====================

/// 过渡效果
/// @param {String} $property - 属性
/// @param {String} $duration - 时长
/// @param {String} $timing - 缓动函数
@mixin transition($property: all, $duration: 0.3s, $timing: ease) {
  transition: $property $duration $timing;
}

/// 悬停效果 - 上浮
/// @param {Number} $distance - 上浮距离
@mixin hover-lift($distance: 4px) {
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  
  &:hover {
    transform: translateY(-#{$distance});
  }
}

/// 悬停效果 - 缩放
/// @param {Number} $scale - 缩放比例
@mixin hover-scale($scale: 1.05) {
  transition: transform 0.3s ease;
  
  &:hover {
    transform: scale($scale);
  }
}

// ==================== 样式混入 ====================

/// 卡片样式
/// @param {Number} $radius - 圆角
/// @param {String} $shadow - 阴影
@mixin card-style($radius: 12px, $shadow: 0 4px 12px rgba(0, 0, 0, 0.08)) {
  background: var(--el-bg-color);
  border-radius: $radius;
  box-shadow: $shadow;
}

/// 滚动条样式
/// @param {Number} $width - 宽度
/// @param {Color} $thumb-color - 滑块颜色
/// @param {Color} $track-color - 轨道颜色
@mixin scrollbar($width: 6px, $thumb-color: rgba(0, 0, 0, 0.15), $track-color: transparent) {
  scrollbar-width: thin;
  scrollbar-color: $thumb-color $track-color;
  
  &::-webkit-scrollbar {
    width: $width;
    height: $width;
  }
  
  &::-webkit-scrollbar-track {
    background: $track-color;
    border-radius: math.div($width, 2);
  }
  
  &::-webkit-scrollbar-thumb {
    background: $thumb-color;
    border-radius: math.div($width, 2);
    
    &:hover {
      background: rgba(0, 0, 0, 0.25);
    }
  }
}

/// 清除按钮默认样式
@mixin button-reset {
  padding: 0;
  border: none;
  background: transparent;
  cursor: pointer;
  outline: none;
  
  &:focus {
    outline: none;
  }
}

/// 清除输入框默认样式
@mixin input-reset {
  padding: 0;
  border: none;
  background: transparent;
  outline: none;
  
  &:focus {
    outline: none;
  }
}

// ==================== 工具混入 ====================

/// 隐藏元素但保持可访问性
@mixin visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/// 禁用用户选择
@mixin no-select {
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}

/// 硬件加速
@mixin hardware-accelerate {
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
}
