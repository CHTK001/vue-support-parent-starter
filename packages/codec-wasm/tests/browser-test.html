<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Codec WASM Browser Test</title>
</head>
<body>
    <h1>Codec WASM Browser Test</h1>
    <div id="result"></div>

    <script type="module">
        import { generateNonce, generateSign, md5Hash } from './src/index.js';

        async function runTest() {
            const resultElement = document.getElementById('result');
            
            try {
                resultElement.innerHTML += '<p>正在加载WASM模块...</p>';
                
                // 测试generateNonce
                const nonce = await generateNonce();
                resultElement.innerHTML += `<p>generateNonce测试通过: ${nonce}</p>`;
                
                // 测试md5Hash
                const hash = await md5Hash('test');
                resultElement.innerHTML += `<p>md5Hash测试通过: ${hash}</p>`;
                
                // 测试generateSign
                const signature = await generateSign('name=test&age=25', Date.now(), nonce, 'secret');
                resultElement.innerHTML += `<p>generateSign测试通过: ${signature}</p>`;
                
                resultElement.innerHTML += '<p style="color: green;">所有测试通过！</p>';
            } catch (error) {
                resultElement.innerHTML += `<p style="color: red;">测试失败: ${error.message}</p>`;
                console.error(error);
            }
        }

        runTest();
    </script>
</body>
</html>