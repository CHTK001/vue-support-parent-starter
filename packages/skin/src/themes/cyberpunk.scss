/**
 * 赛博朋克主题（深度定制 - 性能优化版）
 * 
 * 性能优化说明：
 * 1. 减少 filter: drop-shadow 的使用，改用 box-shadow，降低 GPU 消耗
 * 2. 减少 backdrop-filter 的滥用，仅在关键容器使用
 * 3. 动画使用 transform 和 opacity，开启硬件加速
 * 4. 优化选择器性能，减少通用嵌套
 */

// 使用 data-skin 作为主题入口
html[data-skin="cyberpunk"] {
  // --- CSS 变量定义 (便于运行时调整和统一) ---
  --cyber-cyan: #00ffff;
  --cyber-magenta: #ff00ff;
  --cyber-purple: #a855f7;
  --cyber-dark: #050510;
  --cyber-darker: #030308;
  --cyber-glass-bg: rgba(5, 5, 16, 0.94);
  --cyber-border: rgba(0, 255, 255, 0.3);
  --cyber-border-hover: rgba(0, 255, 255, 0.6);
  --cyber-text-main: #ffffff;
  --cyber-text-sub: rgba(255, 255, 255, 0.7);

  // 基础样式
  color: var(--cyber-text-main);
  
  // 优化：全局滚动条
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  ::-webkit-scrollbar-thumb {
    background: rgba(0, 255, 255, 0.3);
    border-radius: 3px;
    &:hover { background: rgba(0, 255, 255, 0.6); }
  }
  ::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.2);
  }

  // ==================== 布局容器 ====================

  .header-container-with-decoration,
  div.header-container-with-decoration {
    background: linear-gradient(180deg, rgba(5, 5, 16, 0.95) 0%, rgba(10, 10, 26, 0.95) 100%);
    border-bottom: 1px solid var(--cyber-border);
    // 性能权衡：保留 Header 的模糊，因为面积固定且位于顶层
    backdrop-filter: blur(10px); 

    // 顶部霓虹条 - 简化阴影
    &::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--cyber-cyan), var(--cyber-magenta), var(--cyber-cyan), transparent);
      box-shadow: 0 0 10px var(--cyber-cyan);
      z-index: 10;
      pointer-events: none;
    }
  }

  // Navbar
  .base-navbar, .cyberpunk-navbar {
    background: transparent !important; // 由父容器负责背景
    border-bottom: none;

    .vertical-header-right {
      .tool-item {
        color: var(--cyber-cyan);
        transition: transform 0.2s ease, background 0.2s ease;
        will-change: transform; // 提示浏览器优化

        &:hover {
          background: rgba(0, 255, 255, 0.1);
          transform: translateY(-2px);
          color: #fff;
        }
      }
    }
  }

  // Sidebar
  .sidebar-container-with-decoration,
  .sidebar-container,
  .cyberpunk-sidebar {
    background: var(--cyber-dark) !important;
    border-right: 1px solid var(--cyber-border) !important;

    // 优化：移除复杂的伪元素动画，改用简单的边框高亮
    &::before {
      display: none; 
    }

    // 菜单项
    :deep(.el-menu) {
      background: transparent !important;
      border-right: none;
    }

    :deep(.el-menu-item),
    :deep(.el-sub-menu__title) {
      margin: 4px 8px;
      border-radius: 4px; // 更硬朗的风格
      color: var(--cyber-text-sub) !important;
      transition: all 0.2s ease;
      border: 1px solid transparent;

      &:hover {
        color: var(--cyber-cyan) !important;
        background: rgba(0, 255, 255, 0.05) !important;
        border-color: rgba(0, 255, 255, 0.2);
        
        .el-icon, svg { color: var(--cyber-cyan) !important; }
      }

      &.is-active {
        background: rgba(0, 255, 255, 0.1) !important;
        color: var(--cyber-cyan) !important;
        border-color: var(--cyber-cyan) !important;
        box-shadow: 0 0 15px rgba(0, 255, 255, 0.15), inset 0 0 10px rgba(0, 255, 255, 0.05);
        
        // 左侧指示条
        &::after {
          content: '';
          position: absolute; left: -1px; top: 10%; bottom: 10%;
          width: 3px;
          background: var(--cyber-cyan);
          box-shadow: 0 0 8px var(--cyber-cyan);
        }

        .el-icon, svg { color: var(--cyber-cyan) !important; }
      }
    }
  }

  // ==================== 通用 UI 组件适配 (Element Plus) ====================

  // 1. 按钮 (Button)
  .el-button {
    --el-button-bg-color: rgba(0, 0, 0, 0.6);
    --el-button-border-color: var(--cyber-border);
    --el-button-text-color: var(--cyber-cyan);
    --el-button-hover-bg-color: rgba(0, 255, 255, 0.15);
    --el-button-hover-border-color: var(--cyber-cyan);
    --el-button-hover-text-color: #fff;
    
    border-radius: 2px; // 赛博朋克风格：直角或小圆角
    font-family: 'Segoe UI', sans-serif;
    letter-spacing: 0.5px;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);

    &.el-button--primary {
      background: rgba(0, 255, 255, 0.15);
      border-color: var(--cyber-cyan);
      color: var(--cyber-cyan);
      text-shadow: 0 0 5px rgba(0, 255, 255, 0.5);

      &:hover {
        background: var(--cyber-cyan);
        color: #000;
        box-shadow: 0 0 20px rgba(0, 255, 255, 0.4);
      }
    }

    &.el-button--danger {
      border-color: #ff0055;
      color: #ff0055;
      background: rgba(255, 0, 85, 0.1);

      &:hover {
        background: #ff0055;
        color: #fff;
        box-shadow: 0 0 20px rgba(255, 0, 85, 0.4);
      }
    }
  }

  // 2. 输入框 (Input)
  .el-input__wrapper, .el-textarea__inner {
    background-color: rgba(0, 0, 0, 0.4) !important;
    box-shadow: 0 0 0 1px var(--cyber-border) inset !important;
    border-radius: 2px;
    transition: box-shadow 0.2s ease;

    &:hover {
      box-shadow: 0 0 0 1px var(--cyber-border-hover) inset !important;
    }

    &.is-focus {
      box-shadow: 0 0 0 1px var(--cyber-cyan) inset !important;
      // 聚焦时微弱发光
      // box-shadow: 0 0 0 1px var(--cyber-cyan) inset, 0 0 8px rgba(0, 255, 255, 0.2) !important; 
    }

    .el-input__inner {
      color: var(--cyber-text-main);
      &::placeholder { color: rgba(255, 255, 255, 0.3); }
    }
  }

  // 3. 卡片 (Card)
  .el-card, .lay-card {
    background: rgba(10, 14, 25, 0.7) !important;
    border: 1px solid var(--cyber-border);
    color: var(--cyber-text-main);
    border-radius: 4px;
    position: relative;
    overflow: visible; // 允许装饰溢出

    // 卡片标题
    .el-card__header {
      border-bottom: 1px solid rgba(0, 255, 255, 0.15);
      padding: 12px 20px;
      
      span {
        color: var(--cyber-cyan);
        font-weight: 600;
        letter-spacing: 1px;
      }
    }

    // 赛博装饰角标 (仅在 hover 时显示以提升性能，或者使用简单的 border)
    &:hover {
      border-color: var(--cyber-border-hover);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
    }
  }

  // 4. 表格 (Table)
  .el-table {
    --el-table-bg-color: transparent;
    --el-table-tr-bg-color: transparent;
    --el-table-header-bg-color: rgba(0, 255, 255, 0.05);
    --el-table-row-hover-bg-color: rgba(0, 255, 255, 0.1);
    --el-table-border-color: rgba(0, 255, 255, 0.15);
    --el-table-text-color: var(--cyber-text-sub);
    --el-table-header-text-color: var(--cyber-cyan);

    background: transparent !important;
    color: var(--cyber-text-sub);

    th.el-table__cell {
      background: rgba(0, 255, 255, 0.05) !important;
      border-bottom: 1px solid var(--cyber-border) !important;
    }

    td.el-table__cell {
      border-bottom: 1px solid rgba(0, 255, 255, 0.05) !important;
    }

    // 去除多余的边框
    .el-table__inner-wrapper::before { display: none; }
  }

  // 5. 对话框 (Dialog)
  .el-dialog {
    background: rgba(5, 5, 16, 0.95);
    border: 1px solid var(--cyber-cyan);
    box-shadow: 0 0 30px rgba(0, 255, 255, 0.15), 0 0 0 1000px rgba(0,0,0,0.6); // 模拟遮罩加深
    
    .el-dialog__title {
      color: var(--cyber-cyan);
      text-shadow: 0 0 8px rgba(0, 255, 255, 0.5);
    }
    
    .el-dialog__headerbtn .el-dialog__close {
      color: var(--cyber-cyan);
      &:hover { color: #fff; text-shadow: 0 0 5px #fff; }
    }
  }

  // 6. 分页 (Pagination)
  .el-pagination {
    --el-pagination-bg-color: transparent;
    --el-pagination-text-color: var(--cyber-text-sub);
    --el-pagination-hover-color: var(--cyber-cyan);

    button, li {
      background: transparent !important;
      border: 1px solid rgba(0, 255, 255, 0.2);
      margin: 0 2px;
      
      &.is-active {
        background: rgba(0, 255, 255, 0.2) !important;
        border-color: var(--cyber-cyan);
        color: var(--cyber-cyan);
      }
      
      &:hover:not(.is-active) {
        border-color: var(--cyber-border-hover);
        color: var(--cyber-cyan);
      }
    }
  }

  // 7. 标签 (Tag)
  .el-tag {
    background: rgba(0, 255, 255, 0.1);
    border-color: rgba(0, 255, 255, 0.3);
    color: var(--cyber-cyan);
    
    &.el-tag--success {
      background: rgba(0, 255, 0, 0.1);
      border-color: rgba(0, 255, 0, 0.3);
      color: #00ff00;
    }
    &.el-tag--danger {
      background: rgba(255, 0, 0, 0.1);
      border-color: rgba(255, 0, 0, 0.3);
      color: #ff0055;
    }
  }

  // 8. 开关 (Switch) - 迁移自 Vue 文件并优化
  .el-switch {
    &.is-checked .el-switch__core {
      background-color: var(--cyber-cyan) !important;
      border-color: var(--cyber-cyan) !important;
      box-shadow: 0 0 8px rgba(0, 255, 255, 0.6); // 降低阴影扩散半径
    }
    .el-switch__core {
      background-color: rgba(255, 255, 255, 0.1);
      border-color: rgba(255, 255, 255, 0.2);
    }
  }

  // 9. Radio Button 单选按钮
  .el-radio-button__inner {
    background: transparent !important;
    border-color: var(--cyber-magenta) !important;
    color: rgba(0, 255, 255, 0.7) !important;
    border-radius: 0 !important;
  }
  .el-radio-button__original-radio:checked + .el-radio-button__inner {
    background-color: rgba(0, 255, 255, 0.2) !important;
    border-color: var(--cyber-cyan) !important;
    color: var(--cyber-cyan) !important;
    box-shadow: -1px 0 0 0 var(--cyber-cyan) !important;
    text-shadow: 0 0 5px var(--cyber-cyan);
  }

  // 10. Slider 滑块
  .el-slider {
    --el-slider-main-bg-color: var(--cyber-magenta);
    --el-slider-runway-bg-color: rgba(255, 255, 255, 0.1);
    .el-slider__bar {
      background: linear-gradient(90deg, var(--cyber-magenta), var(--cyber-cyan));
    }
    .el-slider__button {
      border-color: var(--cyber-cyan);
      background: #000;
      box-shadow: 0 0 10px var(--cyber-cyan);
    }
  }

  // 11. Input Number 数字输入框
  .el-input-number {
    .el-input__wrapper {
      background-color: rgba(0, 0, 0, 0.5) !important;
      box-shadow: 0 0 0 1px var(--cyber-magenta) inset !important;
      border-radius: 0 !important;
    }
    .el-input__inner {
      color: var(--cyber-cyan) !important;
      font-family: 'Orbitron', monospace;
    }
    .el-input-number__decrease, .el-input-number__increase {
      background: transparent !important;
      color: var(--cyber-cyan) !important;
      border-color: var(--cyber-magenta) !important;
      border-radius: 0 !important;
      &:hover {
        color: #fff !important;
        background: rgba(255, 0, 255, 0.2) !important;
      }
    }
  }
  
  // 12. Select 下拉选择
  .el-select {
    --el-select-border-color-hover: var(--cyber-cyan);
    --el-select-input-focus-border-color: var(--cyber-cyan);
    .el-input__wrapper {
      background-color: rgba(0, 0, 0, 0.5) !important;
      box-shadow: 0 0 0 1px var(--cyber-magenta) inset !important;
      border-radius: 0 !important;
      &.is-focus {
        box-shadow: 0 0 0 1px var(--cyber-cyan) inset !important;
      }
    }
    .el-input__inner {
      color: var(--cyber-cyan) !important;
    }
  }
}
