/**
 * 元旦主题样式 - 冰雪蓝白清新现代风
 * 设计理念：冰雪世界的纯净与新年的希望
 * 主色调：冰蓝渐变 (#E8F4FC → #7CC2E8 → #2A7AB8)
 * 辅助色：银白 #F5FBFF、淡霜紫 #E0E7F5
 */

// 冰雪色板
$ice-lightest: #F5FBFF;
$ice-lighter: #E8F4FC;
$ice-light: #B8E0F2;
$ice-medium: #7CC2E8;
$ice-primary: #4EA8DE;
$ice-deep: #2A7AB8;
$ice-darker: #1E5F8C;
$frost-white: #FFFFFF;
$frost-silver: #F0F7FB;
$frost-purple: #E0E7F5;
$frost-glow: rgba(124, 194, 232, 0.3);

html[data-skin="new-year"] {
  // ==================== Header 容器样式 ====================
  .header-container-with-decoration,
  div.header-container-with-decoration {
    background: linear-gradient(180deg, rgba($ice-lightest, 0.98), rgba($ice-lighter, 0.96)) !important;
    border-bottom: 1px solid rgba($ice-medium, 0.2) !important;
    box-shadow: 0 2px 16px rgba($ice-deep, 0.08) !important;
    backdrop-filter: blur(12px);

    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, transparent, $ice-light 15%, $ice-primary 50%, $ice-light 85%, transparent);
      z-index: 1;
      box-shadow: 0 0 8px rgba($ice-primary, 0.3);
    }

    &.shadow-tab {
      box-shadow: 0 2px 16px rgba($ice-deep, 0.1);
    }
  }

  // ==================== Navbar 样式 ====================
  .base-navbar,
  .new-year-navbar,
  div.base-navbar {
    background: linear-gradient(135deg, rgba($ice-lightest, 0.95), rgba($ice-lighter, 0.92)) !important;
    border-bottom: 1px solid rgba($ice-medium, 0.2) !important;
    backdrop-filter: blur(16px);

    .vertical-header-right {
      :deep(.tool-item) {
        background: rgba($frost-white, 0.75);
        border: 1px solid rgba($ice-medium, 0.2);
        color: $ice-deep;
        border-radius: 8px;

        &:hover {
          background: rgba($frost-white, 0.95);
          border-color: $ice-primary;
          color: $ice-primary;
          box-shadow: 0 4px 12px rgba($ice-primary, 0.15);
        }

        svg { color: $ice-primary; }
        &:hover svg { color: $ice-deep; }
      }

      #header-search, :deep(#header-search),
      #full-screen, :deep(#full-screen) {
        color: $ice-deep !important;
        background: rgba($frost-white, 0.75) !important;
        border: 1px solid rgba($ice-medium, 0.2) !important;
        border-radius: 8px !important;

        svg { color: $ice-primary !important; }

        &:hover {
          background: rgba($frost-white, 0.95) !important;
          border-color: $ice-primary !important;
          box-shadow: 0 4px 12px rgba($ice-primary, 0.15) !important;
          svg { color: $ice-deep !important; }
        }
      }
      
    }
  }

  // 消息按钮 - 白底蓝色SVG（与搜索按钮一致）
  .message-container {
    background: rgba($frost-white, 0.75) !important;
    border: 1px solid rgba($ice-medium, 0.2) !important;
    border-radius: 8px !important;
    
    svg, .message-icon { 
      color: $ice-primary !important; 
    }
    
    &:hover {
      background: rgba($frost-white, 0.95) !important;
      border-color: $ice-primary !important;
      box-shadow: 0 4px 12px rgba($ice-primary, 0.15) !important;
      svg, .message-icon { color: $ice-deep !important; }
    }
  }
  
  // 消息徽标样式
  .message-container .el-badge__content {
    background: linear-gradient(135deg, $ice-primary, $ice-deep) !important;
    border: none !important;
    box-shadow: 0 2px 6px rgba($ice-primary, 0.4) !important;
  }

  // ==================== 语言切换和用户信息样式 ====================
  .user-trigger {
    background: rgba($frost-white, 0.75) !important;
    border: 1px solid rgba($ice-medium, 0.2) !important;
    border-radius: 10px !important;
    padding: 6px 12px !important;
    transition: all 0.25s ease !important;

    &:hover {
      background: rgba($frost-white, 0.95) !important;
      border-color: $ice-primary !important;
      box-shadow: 0 4px 12px rgba($ice-primary, 0.15) !important;
    }

    // 语言图标
    .lang-icon-wrapper {
      background: linear-gradient(135deg, $ice-primary, $ice-medium) !important;
      box-shadow: 0 2px 8px rgba($ice-primary, 0.3) !important;
    }

    .lang-main-icon {
      color: $frost-white !important;
    }

    // 用户名和角色
    .user-name {
      color: $ice-darker !important;
    }

    .user-role {
      color: $ice-medium !important;
    }

    // 下拉箭头
    .dropdown-arrow {
      color: $ice-primary !important;
    }

    // 头像状态点
    .status-dot {
      background: linear-gradient(135deg, #10b981, #34d399) !important;
      box-shadow: 0 0 6px rgba(16, 185, 129, 0.5) !important;
    }

    // 头像容器
    .avatar-container {
      border: 2px solid rgba($ice-primary, 0.3) !important;
      
      &::after {
        border-color: $ice-primary !important;
      }
    }
  }

  // 语言下拉菜单
  .lang-dropdown-popper {
    .el-dropdown-menu {
      background: rgba($frost-white, 0.98) !important;
      border: 1px solid rgba($ice-medium, 0.2) !important;
      box-shadow: 0 8px 32px rgba($ice-deep, 0.15) !important;
      backdrop-filter: blur(12px);
    }

    .lang-header {
      background: linear-gradient(135deg, rgba($ice-lighter, 0.8), rgba($frost-purple, 0.6)) !important;
      color: $ice-deep !important;
      border-bottom: 1px solid rgba($ice-medium, 0.2) !important;

      svg { color: $ice-primary !important; }
    }

    .lang-item {
      &:hover {
        background: rgba($ice-lighter, 0.6) !important;
      }

      &.active {
        background: linear-gradient(135deg, rgba($ice-primary, 0.1), rgba($ice-medium, 0.08)) !important;
      }

      .lang-name { color: $ice-darker !important; }
      .lang-desc { color: $ice-medium !important; }
      .lang-check { color: $ice-primary !important; }
    }
  }

  // 用户下拉菜单
  .user-dropdown-popper {
    .el-dropdown-menu {
      background: rgba($frost-white, 0.98) !important;
      border: 1px solid rgba($ice-medium, 0.2) !important;
      box-shadow: 0 8px 32px rgba($ice-deep, 0.15) !important;
      backdrop-filter: blur(12px);
    }

    .menu-header {
      background: linear-gradient(135deg, rgba($ice-lighter, 0.8), rgba($frost-purple, 0.6)) !important;
      border-bottom: 1px solid rgba($ice-medium, 0.2) !important;

      .header-name { color: $ice-darker !important; }
      .header-status { color: $ice-primary !important; }
    }

    .menu-item {
      &:hover {
        background: rgba($ice-lighter, 0.6) !important;
      }

      .item-title { color: $ice-darker !important; }
      .item-desc { color: $ice-medium !important; }
      .item-arrow { color: $ice-primary !important; }

      .item-icon {
        background: linear-gradient(135deg, rgba($ice-primary, 0.15), rgba($ice-medium, 0.1)) !important;
        svg { color: $ice-primary !important; }
      }
    }

    .menu-footer {
      border-top: 1px solid rgba($ice-medium, 0.2) !important;
      background: rgba($frost-purple, 0.3) !important;
    }

    .logout-item {
      color: #ef4444 !important;
      
      &:hover {
        background: rgba(239, 68, 68, 0.1) !important;
      }
    }
  }

  // 面包屑容器
  .breadcrumb-container {
    background: rgba($frost-white, 0.75);
    border: 1px solid rgba($ice-medium, 0.15);
    border-radius: 8px;
    backdrop-filter: blur(8px);

    :deep(.el-breadcrumb__inner) { color: $ice-deep; font-weight: 500; }
    :deep(.el-breadcrumb__separator) { color: $ice-medium; }
  }

  // ==================== Sidebar 样式 ====================
  .sidebar-container-with-decoration,
  .sidebar-container,
  .new-year-sidebar {
    background: linear-gradient(180deg, rgba($ice-lightest, 0.98) 0%, rgba($frost-purple, 0.95) 100%) !important;
    border-right: 1px solid rgba($ice-medium, 0.2) !important;
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(12px);
    
    // 冰晶装饰
    &::after {
      content: '❄';
      position: absolute;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 48px;
      opacity: 0.12;
      pointer-events: none;
      z-index: 0;
      color: $ice-medium;
      filter: drop-shadow(0 0 12px rgba($ice-primary, 0.4));
      animation: snowflakeGlow 4s ease-in-out infinite;
    }

    :deep(.el-menu) { background: transparent !important; border-right: none; position: relative; z-index: 1; }

    :deep(.el-menu-item),
    :deep(.el-sub-menu__title) {
      color: $ice-darker !important;
      background: rgba($frost-white, 0.65) !important;
      margin: 6px 10px;
      border-radius: 10px;
      border: 1px solid rgba($ice-medium, 0.2) !important;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      z-index: 1;
      backdrop-filter: blur(8px);

      &:hover {
        background: rgba($frost-white, 0.85) !important;
        color: $ice-deep !important;
        border-color: rgba($ice-primary, 0.4) !important;
        transform: translateX(4px);
        box-shadow: 0 4px 16px rgba($ice-primary, 0.15);
      }

      &.is-active {
        background: linear-gradient(135deg, $ice-primary, $ice-medium) !important;
        color: $frost-white !important;
        border: 1px solid rgba($ice-deep, 0.3) !important;
        box-shadow: 0 4px 20px rgba($ice-primary, 0.35);
      }

      .el-icon, svg { color: $ice-primary !important; }
      &:hover .el-icon, &:hover svg { color: $ice-deep !important; }
      &.is-active .el-icon, &.is-active svg { color: $frost-white !important; }
      span, div { color: inherit !important; }
    }
    
    :deep(.el-scrollbar) {
      position: relative;
      z-index: 1;
    }
  }
  
  // 雪花闪烁动画
  @keyframes snowflakeGlow {
    0%, 100% {
      opacity: 0.12;
      filter: drop-shadow(0 0 12px rgba($ice-primary, 0.4));
      transform: translateX(-50%) rotate(0deg);
    }
    50% {
      opacity: 0.2;
      filter: drop-shadow(0 0 20px rgba($ice-primary, 0.6));
      transform: translateX(-50%) rotate(30deg);
    }
  }

  // ==================== 标签页特色样式 ====================
  .tags-view {
    background: linear-gradient(135deg, rgba($ice-lightest, 0.98), rgba($ice-lighter, 0.95)) !important;
    border-bottom: 1px solid rgba($ice-medium, 0.2) !important;
    box-shadow: 0 2px 12px rgba($ice-deep, 0.06) !important;
    position: relative;
    backdrop-filter: blur(12px);

    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, transparent, $ice-light 20%, $ice-primary 50%, $ice-light 80%, transparent);
      z-index: 10;
      box-shadow: 0 0 6px rgba($ice-primary, 0.25);
    }
  }

  .scroll-item,
  .chrome-item,
  .modern-item,
  .card-item,
  .smart-item {
    background: rgba($frost-white, 0.75) !important;
    border: 1px solid rgba($ice-medium, 0.25) !important;
    border-radius: 8px !important;
    color: $ice-darker !important;
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(8px);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

    .tag-title { 
      color: $ice-darker !important;
    }
    .tag-icon { color: $ice-primary !important; }

    &:hover {
      background: rgba($frost-white, 0.9) !important;
      border-color: $ice-primary !important;
      transform: translateY(-1px);
      box-shadow: 0 4px 16px rgba($ice-primary, 0.2) !important;
      
      .tag-title, .tag-icon { color: $ice-deep !important; }
    }

    &.is-active,
    &.active {
      background: linear-gradient(135deg, $ice-primary, $ice-medium) !important;
      border: 1px solid rgba($ice-deep, 0.3) !important;
      box-shadow: 0 4px 20px rgba($ice-primary, 0.35) !important;

      .tag-title {
        color: $frost-white !important;
        font-weight: 600 !important;
      }

      .tag-icon { 
        color: $frost-white !important;
      }

      .el-icon-close,
      .chrome-close-btn {
        color: rgba($frost-white, 0.85) !important;
        &:hover {
          color: $frost-white !important;
          background: rgba($frost-white, 0.15) !important;
          border-radius: 50%;
        }
      }
    }
    
    .chrome-close-btn {
      color: $ice-medium !important;
    }
  }

  // 箭头按钮
  .arrow-left, .arrow-right, .arrow-down {
    background: rgba($frost-white, 0.8) !important;
    border: 1px solid rgba($ice-medium, 0.2) !important;
    border-radius: 6px !important;
    color: $ice-primary !important;
    transition: all 0.3s ease !important;

    &:hover {
      background: rgba($frost-white, 0.95) !important;
      border-color: $ice-primary !important;
      color: $ice-deep !important;
      box-shadow: 0 2px 8px rgba($ice-primary, 0.2);
    }
    
    svg {
      color: inherit !important;
    }
  }

  // 右键菜单
  .contextmenu {
    background: linear-gradient(180deg, rgba($ice-lightest, 0.98), rgba($frost-purple, 0.96)) !important;
    border: 1px solid rgba($ice-medium, 0.25) !important;
    border-radius: 10px !important;
    box-shadow: 0 8px 32px rgba($ice-deep, 0.15) !important;
    backdrop-filter: blur(16px);

    li {
      color: $ice-darker !important;
      border-radius: 6px;
      margin: 2px 4px;
      &:hover {
        background: rgba($ice-primary, 0.12) !important;
        color: $ice-deep !important;
      }
    }
  }

  // 灵动模式进度条
  .schedule-active, .schedule-in {
    background: linear-gradient(90deg, $ice-light, $ice-primary) !important;
    box-shadow: 0 0 8px rgba($ice-primary, 0.5) !important;
  }

  // ==================== 嵌套菜单激活背景 ====================
  .sidebar-container .el-menu-item.is-active.nest-menu::before {
    background: linear-gradient(135deg, $ice-primary, $ice-medium) !important;
    box-shadow: 0 4px 16px rgba($ice-primary, 0.4) !important;
  }
  
  .sidebar-container .el-menu-item.is-active.nest-menu > * {
    color: $frost-white !important;
  }
  
  .sidebar-container .is-active.submenu-title-noDropdown.outer-most::before {
    background: linear-gradient(135deg, $ice-primary, $ice-medium) !important;
    box-shadow: 0 4px 16px rgba($ice-primary, 0.4) !important;
  }
  
  .sidebar-container .is-active.submenu-title-noDropdown.outer-most > * {
    color: $frost-white !important;
  }
  
  .sidebar-container .el-menu--collapse .is-active.outer-most.el-sub-menu > .el-sub-menu__title::before {
    background: linear-gradient(to bottom, $ice-primary, $ice-medium) !important;
  }
  
  .el-menu--vertical .el-menu--popup .el-menu-item.is-active {
    background: linear-gradient(135deg, $ice-primary, $ice-medium) !important;
    color: $frost-white !important;
    box-shadow: 0 4px 16px rgba($ice-primary, 0.4) !important;
    
    span, div, .el-text, .el-icon, svg, i {
      color: $frost-white !important;
    }
  }

  // ==================== 子菜单弹出层 ====================
  .pure-scrollbar,
  .el-menu--popup,
  .el-menu--popup-container {
    &.el-menu {
      background: linear-gradient(180deg, rgba($ice-lightest, 0.98), rgba($frost-purple, 0.96)) !important;
      border: 1px solid rgba($ice-medium, 0.25) !important;
      border-radius: 12px !important;
      box-shadow: 0 8px 32px rgba($ice-deep, 0.15) !important;
      backdrop-filter: blur(16px);
      overflow: hidden;
      padding: 8px !important;
      position: relative;

      &::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 2px;
        background: linear-gradient(90deg, transparent, $ice-light 20%, $ice-primary 50%, $ice-light 80%, transparent);
        z-index: 1;
      }
    }

    .el-menu-item,
    .el-sub-menu__title {
      margin: 4px 4px !important;
      border-radius: 8px !important;
      position: relative;
      z-index: 1;
      color: $ice-darker !important;
      background: rgba($frost-white, 0.7) !important;
      border: 1px solid rgba($ice-medium, 0.2) !important;
      transition: all 0.3s ease !important;
      padding: 0 16px !important;
      height: 42px !important;
      line-height: 42px !important;

      &:hover {
        background: rgba($frost-white, 0.9) !important;
        border-color: rgba($ice-primary, 0.4) !important;
        color: $ice-deep !important;
        box-shadow: 0 4px 12px rgba($ice-primary, 0.15) !important;
        transform: translateX(4px) !important;
      }

      .el-icon, svg {
        color: $ice-primary !important;
        margin-right: 8px;
      }

      span, div {
        color: inherit !important;
      }
      
      &:hover .el-icon, &:hover svg {
        color: $ice-deep !important;
      }

      &.is-active {
        background: linear-gradient(135deg, $ice-primary, $ice-medium) !important;
        color: $frost-white !important;
        border: 1px solid rgba($ice-deep, 0.2) !important;
        font-weight: 600 !important;
        box-shadow: 0 4px 16px rgba($ice-primary, 0.3) !important;
        transform: translateX(4px) !important;

        span, div {
          color: $frost-white !important;
        }

        .el-icon, svg {
          color: $frost-white !important;
        }
      }
    }

    .el-sub-menu__icon-arrow {
      color: $ice-medium !important;
    }

    .el-menu--inline {
      background: rgba($ice-lighter, 0.5) !important;
      border-radius: 8px;
      margin: 4px 0;
      padding: 4px !important;

      .el-menu-item {
        padding-left: 40px !important;
      }
    }
  }

  // ==================== Logo 区域 ====================
  .sidebar-logo-container {
    background: linear-gradient(135deg, rgba($ice-lightest, 0.95), rgba($ice-lighter, 0.9)) !important;
    border-bottom: 1px solid rgba($ice-medium, 0.2) !important;

    .sidebar-logo-link .sidebar-title {
      color: $ice-deep !important;
      font-weight: 600 !important;
    }
  }

  // ==================== 内容区域样式 ====================
  .sidebar-custom {
    border: 1px solid rgba($ice-medium, 0.15) !important;
    box-shadow: 0 4px 24px rgba($ice-deep, 0.08) !important;
    background: rgba($frost-white, 0.85) !important;
    backdrop-filter: blur(8px);
    
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, transparent, $ice-light 20%, $ice-primary 50%, $ice-light 80%, transparent);
      z-index: 1;
    }
  }
  
  .no-card-mode.sidebar-custom {
    border: none !important;
    box-shadow: none !important;
    background: transparent !important;
    
    &::before {
      display: none;
    }
  }

  // ==================== 工具栏按钮样式 ====================
  .tool-bar {
    .tool-item {
      background: rgba($frost-white, 0.7) !important;
      border: 1px solid rgba($ice-medium, 0.2) !important;
      border-radius: 8px !important;
      transition: all 0.3s ease !important;
      
      &:hover {
        background: rgba($frost-white, 0.95) !important;
        border-color: $ice-primary !important;
        box-shadow: 0 4px 12px rgba($ice-primary, 0.15) !important;
      }
      
      svg, .el-icon {
        color: $ice-primary !important;
      }
      
      &:hover svg, &:hover .el-icon {
        color: $ice-deep !important;
      }
      
      // 消息徽标样式
      .el-badge__content {
        background: linear-gradient(135deg, $ice-primary, $ice-deep) !important;
        border: none !important;
        box-shadow: 0 2px 8px rgba($ice-primary, 0.4) !important;
      }
    }
    
    // 用户触发器样式
    .user-trigger {
      background: rgba($frost-white, 0.7) !important;
      border: 1px solid rgba($ice-medium, 0.2) !important;
      border-radius: 10px !important;
      
      &:hover {
        background: rgba($frost-white, 0.95) !important;
        border-color: $ice-primary !important;
        box-shadow: 0 4px 16px rgba($ice-primary, 0.15) !important;
      }
      
      .user-name {
        color: $ice-darker !important;
      }
      
      .user-role {
        color: $ice-medium !important;
      }
      
      .dropdown-arrow {
        color: $ice-primary !important;
      }
      
      .status-dot {
        background: $ice-primary !important;
        box-shadow: 0 0 6px rgba($ice-primary, 0.5) !important;
      }
    }
    
    // 语言图标样式
    .lang-style {
      .lang-main-icon {
        color: $ice-primary !important;
      }
    }
  }
}

// ==================== 全局下拉菜单样式（在 html[data-skin] 外部） ====================

// 消息中心下拉弹窗
html[data-skin="new-year"] .message-dropdown-popper,
.theme-new-year .message-dropdown-popper {
  $ice-lightest: #F5FBFF;
  $ice-lighter: #E8F4FC;
  $ice-light: #B8E0F2;
  $ice-medium: #7CC2E8;
  $ice-primary: #4EA8DE;
  $ice-deep: #2A7AB8;
  $ice-darker: #1E5F8C;
  $frost-white: #FFFFFF;
  $frost-purple: #E0E7F5;
  
  background: linear-gradient(180deg, rgba($ice-lightest, 0.98), rgba($frost-purple, 0.96)) !important;
  border: 1px solid rgba($ice-medium, 0.25) !important;
  border-radius: 16px !important;
  box-shadow: 0 12px 40px rgba($ice-deep, 0.15) !important;
  backdrop-filter: blur(20px) !important;
  overflow: hidden !important;
  
  .message-panel {
    background: transparent !important;
    
    .panel-header {
      background: linear-gradient(135deg, rgba($ice-primary, 0.08), rgba($ice-medium, 0.05)) !important;
      border-bottom: 1px solid rgba($ice-medium, 0.15) !important;
      
      .header-title {
        color: $ice-deep !important;
        font-weight: 600 !important;
      }
      
      .el-button {
        color: $ice-primary !important;
        
        &:hover {
          color: $ice-deep !important;
        }
      }
    }
    
    .message-list {
      .message-item {
        background: rgba($frost-white, 0.7) !important;
        border: 1px solid rgba($ice-medium, 0.15) !important;
        border-radius: 10px !important;
        margin: 8px !important;
        transition: all 0.3s ease !important;
        
        &:hover {
          background: rgba($frost-white, 0.95) !important;
          border-color: $ice-primary !important;
          box-shadow: 0 4px 16px rgba($ice-primary, 0.12) !important;
        }
        
        .item-title {
          color: $ice-darker !important;
        }
        
        .item-content {
          color: $ice-deep !important;
        }
        
        .item-time {
          color: $ice-medium !important;
        }
      }
    }
    
    .panel-footer {
      background: linear-gradient(135deg, rgba($ice-lighter, 0.5), rgba($frost-purple, 0.4)) !important;
      border-top: 1px solid rgba($ice-medium, 0.15) !important;
      
      .el-button {
        color: $ice-primary !important;
        
        &:hover {
          color: $ice-deep !important;
          background: rgba($ice-primary, 0.08) !important;
        }
      }
    }
  }
}

// 语言切换下拉弹窗
html[data-skin="new-year"] .lang-dropdown-popper,
.theme-new-year .lang-dropdown-popper {
  $ice-lightest: #F5FBFF;
  $ice-lighter: #E8F4FC;
  $ice-light: #B8E0F2;
  $ice-medium: #7CC2E8;
  $ice-primary: #4EA8DE;
  $ice-deep: #2A7AB8;
  $ice-darker: #1E5F8C;
  $frost-white: #FFFFFF;
  $frost-purple: #E0E7F5;
  
  background: linear-gradient(180deg, rgba($ice-lightest, 0.98), rgba($frost-purple, 0.96)) !important;
  border: 1px solid rgba($ice-medium, 0.25) !important;
  border-radius: 14px !important;
  box-shadow: 0 12px 40px rgba($ice-deep, 0.15) !important;
  backdrop-filter: blur(20px) !important;
  overflow: hidden !important;
  
  .lang-menu {
    background: transparent !important;
    padding: 8px !important;
    
    .lang-header {
      color: $ice-deep !important;
      border-bottom: 1px solid rgba($ice-medium, 0.15) !important;
      padding: 12px 16px !important;
      margin-bottom: 8px !important;
      
      svg {
        color: $ice-primary !important;
      }
    }
    
    .lang-item {
      background: rgba($frost-white, 0.6) !important;
      border: 1px solid rgba($ice-medium, 0.15) !important;
      border-radius: 10px !important;
      margin: 4px 0 !important;
      padding: 12px 16px !important;
      transition: all 0.3s ease !important;
      
      &:hover {
        background: rgba($frost-white, 0.9) !important;
        border-color: $ice-primary !important;
        box-shadow: 0 4px 12px rgba($ice-primary, 0.12) !important;
      }
      
      &.active {
        background: linear-gradient(135deg, $ice-primary, $ice-medium) !important;
        border-color: $ice-deep !important;
        
        .lang-name, .lang-desc {
          color: $frost-white !important;
        }
        
        .lang-check {
          color: $frost-white !important;
        }
      }
      
      .lang-name {
        color: $ice-darker !important;
        font-weight: 500 !important;
      }
      
      .lang-desc {
        color: $ice-medium !important;
        font-size: 12px !important;
      }
      
      .lang-check {
        color: $ice-primary !important;
      }
    }
  }
}

// 用户下拉弹窗
html[data-skin="new-year"] .user-dropdown-popper,
.theme-new-year .user-dropdown-popper {
  $ice-lightest: #F5FBFF;
  $ice-lighter: #E8F4FC;
  $ice-light: #B8E0F2;
  $ice-medium: #7CC2E8;
  $ice-primary: #4EA8DE;
  $ice-deep: #2A7AB8;
  $ice-darker: #1E5F8C;
  $frost-white: #FFFFFF;
  $frost-purple: #E0E7F5;
  
  background: linear-gradient(180deg, rgba($ice-lightest, 0.98), rgba($frost-purple, 0.96)) !important;
  border: 1px solid rgba($ice-medium, 0.25) !important;
  border-radius: 16px !important;
  box-shadow: 0 12px 40px rgba($ice-deep, 0.15) !important;
  backdrop-filter: blur(20px) !important;
  overflow: hidden !important;
  
  .user-menu {
    background: transparent !important;
    padding: 0 !important;
    
    .menu-header {
      background: linear-gradient(135deg, $ice-primary, $ice-medium) !important;
      padding: 20px !important;
      
      .header-avatar {
        border: 3px solid rgba($frost-white, 0.5) !important;
        box-shadow: 0 4px 12px rgba($ice-deep, 0.2) !important;
      }
      
      .header-name {
        color: $frost-white !important;
        font-weight: 600 !important;
      }
      
      .header-status {
        color: rgba($frost-white, 0.85) !important;
      }
    }
    
    .menu-body {
      padding: 12px !important;
      
      .menu-item {
        background: rgba($frost-white, 0.6) !important;
        border: 1px solid rgba($ice-medium, 0.15) !important;
        border-radius: 10px !important;
        margin: 6px 0 !important;
        padding: 12px 16px !important;
        transition: all 0.3s ease !important;
        
        &:hover {
          background: rgba($frost-white, 0.95) !important;
          border-color: $ice-primary !important;
          box-shadow: 0 4px 16px rgba($ice-primary, 0.12) !important;
          transform: translateX(4px) !important;
        }
        
        .item-icon {
          background: linear-gradient(135deg, rgba($ice-primary, 0.15), rgba($ice-medium, 0.1)) !important;
          border: 1px solid rgba($ice-medium, 0.2) !important;
          
          svg {
            color: $ice-primary !important;
          }
        }
        
        .item-title {
          color: $ice-darker !important;
          font-weight: 500 !important;
        }
        
        .item-desc {
          color: $ice-medium !important;
        }
        
        .item-arrow {
          color: $ice-medium !important;
        }
        
        &:hover .item-arrow {
          color: $ice-primary !important;
        }
      }
    }
    
    .menu-footer {
      background: linear-gradient(135deg, rgba($ice-lighter, 0.5), rgba($frost-purple, 0.4)) !important;
      border-top: 1px solid rgba($ice-medium, 0.15) !important;
      padding: 12px !important;
      
      .logout-item {
        background: rgba($frost-white, 0.7) !important;
        border: 1px solid rgba(#f56c6c, 0.2) !important;
        border-radius: 10px !important;
        color: #f56c6c !important;
        transition: all 0.3s ease !important;
        
        &:hover {
          background: rgba(#f56c6c, 0.1) !important;
          border-color: #f56c6c !important;
        }
        
        svg {
          color: #f56c6c !important;
        }
      }
    }
  }
}

// 消息中心 Drawer 样式
html[data-skin="new-year"] .message-center-drawer,
.theme-new-year .message-center-drawer {
  $ice-lightest: #F5FBFF;
  $ice-lighter: #E8F4FC;
  $ice-light: #B8E0F2;
  $ice-medium: #7CC2E8;
  $ice-primary: #4EA8DE;
  $ice-deep: #2A7AB8;
  $ice-darker: #1E5F8C;
  $frost-white: #FFFFFF;
  $frost-purple: #E0E7F5;
  
  .el-drawer__header {
    background: linear-gradient(135deg, $ice-primary, $ice-medium) !important;
    border-bottom: none !important;
    padding: 20px 24px !important;
    margin-bottom: 0 !important;
    
    .drawer-title {
      color: $frost-white !important;
      font-size: 18px !important;
      font-weight: 600 !important;
    }
    
    .el-badge__content {
      background: $frost-white !important;
      color: $ice-primary !important;
    }
    
    .el-drawer__close-btn {
      color: $frost-white !important;
      
      &:hover {
        color: rgba($frost-white, 0.8) !important;
      }
    }
  }
  
  .el-drawer__body {
    background: linear-gradient(180deg, $ice-lightest, $frost-purple) !important;
    padding: 0 !important;
    
    .message-tabs {
      padding: 0 16px !important;
      
      .el-tabs__nav-wrap::after {
        background: rgba($ice-medium, 0.2) !important;
      }
      
      .el-tabs__item {
        color: $ice-darker !important;
        
        &.is-active {
          color: $ice-primary !important;
        }
        
        &:hover {
          color: $ice-deep !important;
        }
      }
      
      .el-tabs__active-bar {
        background: $ice-primary !important;
      }
    }
    
    .drawer-actions {
      padding: 12px 16px !important;
      background: rgba($frost-white, 0.6) !important;
      border-bottom: 1px solid rgba($ice-medium, 0.15) !important;
      
      .el-button {
        background: rgba($frost-white, 0.8) !important;
        border: 1px solid rgba($ice-medium, 0.2) !important;
        color: $ice-deep !important;
        
        &:hover {
          background: rgba($frost-white, 1) !important;
          border-color: $ice-primary !important;
          color: $ice-primary !important;
        }
        
        svg {
          color: inherit !important;
        }
      }
    }
    
    .drawer-content {
      padding: 16px !important;
      
      .drawer-message-item {
        background: rgba($frost-white, 0.75) !important;
        border: 1px solid rgba($ice-medium, 0.2) !important;
        border-radius: 12px !important;
        margin-bottom: 12px !important;
        padding: 16px !important;
        transition: all 0.3s ease !important;
        
        &:hover {
          background: rgba($frost-white, 0.95) !important;
          border-color: $ice-primary !important;
          box-shadow: 0 4px 16px rgba($ice-primary, 0.12) !important;
        }
        
        &.unread {
          border-left: 3px solid $ice-primary !important;
        }
        
        .msg-title {
          color: $ice-darker !important;
          font-weight: 500 !important;
        }
        
        .msg-content {
          color: $ice-deep !important;
        }
        
        .msg-time {
          color: $ice-medium !important;
        }
        
        .default-avatar {
          background: linear-gradient(135deg, $ice-primary, $ice-medium) !important;
          color: $frost-white !important;
        }
        
        .msg-actions .el-button {
          color: $ice-medium !important;
          
          &:hover {
            color: $ice-primary !important;
          }
        }
      }
    }
  }
}

// 标签页功能下拉菜单
html[data-skin="new-year"] .tag-function-dropdown-popper,
.theme-new-year .tag-function-dropdown-popper {
  $ice-lightest: #F5FBFF;
  $ice-lighter: #E8F4FC;
  $ice-medium: #7CC2E8;
  $ice-primary: #4EA8DE;
  $ice-deep: #2A7AB8;
  $ice-darker: #1E5F8C;
  $frost-white: #FFFFFF;
  $frost-purple: #E0E7F5;
  
  background: linear-gradient(180deg, rgba($ice-lightest, 0.98), rgba($frost-purple, 0.96)) !important;
  border: 1px solid rgba($ice-medium, 0.25) !important;
  border-radius: 12px !important;
  box-shadow: 0 8px 32px rgba($ice-deep, 0.15) !important;
  backdrop-filter: blur(16px) !important;
  
  .el-dropdown-menu {
    background: transparent !important;
    padding: 6px !important;
    
    .el-dropdown-menu__item {
      color: $ice-darker !important;
      border-radius: 8px !important;
      margin: 2px 0 !important;
      transition: all 0.3s ease !important;
      
      &:hover {
        background: rgba($ice-primary, 0.1) !important;
        color: $ice-deep !important;
      }
      
      &.is-disabled {
        color: rgba($ice-medium, 0.5) !important;
      }
      
      svg {
        color: $ice-primary !important;
      }
    }
  }
}

// ==================== 双栏布局样式 ====================
html[data-skin="new-year"] {
  $ice-lightest: #F5FBFF;
  $ice-lighter: #E8F4FC;
  $ice-light: #B8E0F2;
  $ice-medium: #7CC2E8;
  $ice-primary: #4EA8DE;
  $ice-deep: #2A7AB8;
  $ice-darker: #1E5F8C;
  $frost-white: #FFFFFF;
  $frost-purple: #E0E7F5;
  $frost-border: rgba($ice-medium, 0.25);

  // 双栏导航容器
  .double-nav-container {
    // 左栏 - 冰霜白底
    .double-nav-left {
      background: linear-gradient(180deg, rgba($ice-lightest, 0.98), rgba($frost-purple, 0.95)) !important;
      border-right: 2px solid $frost-border !important;
      box-shadow: 2px 0 12px rgba($ice-deep, 0.08) !important;

      // Logo区域
      .sidebar-logo-container {
        background: linear-gradient(180deg, rgba($frost-white, 0.95), rgba($ice-lightest, 0.9)) !important;
        border-bottom: 1px solid $frost-border !important;

        .sidebar-title {
          color: $ice-deep !important;
          font-weight: 600;
        }
      }

      // 一级菜单 - 简洁图标样式
      .first-level-menu {
        background: transparent !important;
        
        .el-menu-item {
          color: $ice-deep !important;
          background: rgba($frost-white, 0.6) !important;
          border-radius: 10px !important;
          margin: 6px 8px !important;
          transition: all 0.3s ease;

          .menu-icon-only {
            svg, i {
              color: $ice-primary !important;
              font-size: 20px;
            }
          }

          &:hover {
            background: rgba($frost-white, 0.9) !important;
            color: $ice-primary !important;
            box-shadow: 0 4px 12px rgba($ice-primary, 0.15) !important;

            .menu-icon-only svg,
            .menu-icon-only i {
              color: $ice-deep !important;
            }
          }

          &.is-active {
            background: linear-gradient(135deg, $ice-primary, $ice-medium) !important;
            color: $frost-white !important;
            box-shadow: 0 4px 16px rgba($ice-primary, 0.35) !important;

            .menu-icon-only svg,
            .menu-icon-only i {
              color: $frost-white !important;
            }
          }
        }
      }
    }

    // 右栏 - 淡蓝渐变背景
    .double-nav-right {
      background: linear-gradient(180deg, rgba($ice-lighter, 0.95), rgba($frost-purple, 0.9)) !important;
      border-left: 1px solid rgba($ice-medium, 0.15) !important;

      // 子菜单列表
      .sub-menu-list {
        .el-menu {
          background: transparent !important;
        }

        .el-menu-item {
          color: $ice-darker !important;
          background: rgba($frost-white, 0.65) !important;
          border: 1px solid rgba($ice-medium, 0.15) !important;
          border-radius: 8px !important;
          margin: 4px 8px !important;
          transition: all 0.3s ease;

          .el-icon, svg {
            color: $ice-primary !important;
          }

          &:hover {
            background: rgba($frost-white, 0.9) !important;
            border-color: rgba($ice-primary, 0.4) !important;
            color: $ice-deep !important;
            box-shadow: 0 4px 12px rgba($ice-primary, 0.12) !important;
          }

          &.is-active {
            background: linear-gradient(135deg, $ice-primary, $ice-medium) !important;
            border-color: transparent !important;
            color: $frost-white !important;
            box-shadow: 0 4px 16px rgba($ice-primary, 0.3) !important;

            .el-icon, svg {
              color: $frost-white !important;
            }
          }
        }

        .el-sub-menu__title {
          color: $ice-deep !important;
          background: rgba($frost-white, 0.5) !important;
          border-radius: 8px !important;
          margin: 4px 8px !important;
          font-weight: 500;

          .el-icon, svg {
            color: $ice-primary !important;
          }

          &:hover {
            background: rgba($frost-white, 0.8) !important;
            color: $ice-primary !important;
          }
        }

        .el-sub-menu.is-active > .el-sub-menu__title {
          color: $ice-primary !important;
          font-weight: 600;
        }
      }
    }

    // 折叠按钮
    .double-nav-collapse {
      .left-collapse {
        background: linear-gradient(180deg, rgba($frost-white, 0.95), rgba($ice-lightest, 0.9)) !important;
        border-top: 1px solid $frost-border !important;

        svg {
          color: $ice-primary !important;
        }

        &:hover {
          background: rgba($ice-lighter, 0.8) !important;

          svg {
            color: $ice-deep !important;
          }
        }
      }
    }
  }

  // ==================== 悬停布局样式 ====================
  .sidebar-hover-container {
    background: linear-gradient(180deg, rgba($ice-lightest, 0.98), rgba($frost-purple, 0.95)) !important;
    border-right: 2px solid $frost-border !important;
    box-shadow: 2px 0 16px rgba($ice-deep, 0.1) !important;

    // Logo区域
    .sidebar-logo-container {
      background: linear-gradient(180deg, rgba($frost-white, 0.95), rgba($ice-lightest, 0.9)) !important;
      border-bottom: 1px solid $frost-border !important;

      .sidebar-title {
        color: $ice-deep !important;
        font-weight: 600;
      }
    }

    // 折叠按钮
    .sidebar-collapse-btn,
    .hover-collapse-btn {
      background: rgba($frost-white, 0.8) !important;
      border: 1px solid rgba($ice-medium, 0.2) !important;
      color: $ice-primary !important;
      border-radius: 8px !important;
      
      &:hover {
        background: rgba($frost-white, 0.95) !important;
        border-color: $ice-primary !important;
        color: $ice-deep !important;
      }
      
      .collapse-text {
        color: $ice-deep !important;
      }
    }

    // 悬停菜单容器
    .hover-menu-container {
      .first-level-menu-item {
        color: $ice-darker !important;
        background: rgba($frost-white, 0.65) !important;
        border: 1px solid rgba($ice-medium, 0.15) !important;
        border-radius: 10px !important;
        margin: 6px 10px !important;
        transition: all 0.3s ease;

        .menu-icon {
          color: $ice-primary !important;
        }

        .menu-title {
          color: $ice-darker !important;
        }

        &:hover {
          background: rgba($frost-white, 0.9) !important;
          border-color: rgba($ice-primary, 0.4) !important;
          box-shadow: 0 4px 12px rgba($ice-primary, 0.12) !important;
          transform: translateX(4px);

          .menu-icon, .menu-title {
            color: $ice-deep !important;
          }
        }

        &.is-active {
          background: linear-gradient(135deg, $ice-primary, $ice-medium) !important;
          border-color: transparent !important;
          box-shadow: 0 4px 16px rgba($ice-primary, 0.35) !important;

          .menu-icon, .menu-title {
            color: $frost-white !important;
          }
        }
      }
    }
  }

  // 悬停子菜单弹出层
  .sub-menu-popup {
    .sub-menu-container {
      background: linear-gradient(180deg, rgba($ice-lightest, 0.98), rgba($frost-purple, 0.96)) !important;
      border: 1px solid rgba($ice-medium, 0.2) !important;
      border-radius: 16px !important;
      box-shadow: 0 12px 48px rgba($ice-deep, 0.2) !important;
      backdrop-filter: blur(16px);

      .sub-menu-content {
        // 分组标题
        .column-title {
          color: $ice-deep !important;
          font-weight: 600;
          border-bottom: 2px solid rgba($ice-primary, 0.3) !important;
          padding-bottom: 8px;
          margin-bottom: 8px;
        }

        // 菜单项
        .menu-item {
          color: $ice-darker !important;
          background: rgba($frost-white, 0.6) !important;
          border: 1px solid rgba($ice-medium, 0.15) !important;
          border-radius: 8px !important;
          transition: all 0.25s ease;

          &:hover {
            background: rgba($frost-white, 0.9) !important;
            border-color: rgba($ice-primary, 0.4) !important;
            color: $ice-deep !important;
            transform: translateX(4px);
          }

          &.is-active {
            background: linear-gradient(135deg, $ice-primary, $ice-medium) !important;
            border-color: transparent !important;
            color: $frost-white !important;
          }
        }

        // 收藏菜单项
        .favorite-menu-item {
          color: $ice-darker !important;
          background: rgba($frost-white, 0.6) !important;
          border: 1px solid rgba($ice-medium, 0.15) !important;
          border-radius: 8px !important;
          
          &:hover {
            background: rgba($frost-white, 0.9) !important;
            border-color: $ice-primary !important;
          }

          .add-time {
            color: $ice-medium !important;
          }
        }

        // 空收藏状态
        .empty-favorites {
          color: $ice-medium !important;

          .empty-icon {
            color: $ice-light !important;
          }

          p {
            color: $ice-deep !important;
          }
        }

        // 收藏按钮
        .favorite-btn {
          background: rgba($frost-white, 0.8) !important;
          border: 1px solid rgba($ice-medium, 0.2) !important;
          color: $ice-primary !important;
          
          &:hover {
            background: rgba($ice-primary, 0.1) !important;
            border-color: $ice-primary !important;
          }

          &.remove-favorite:hover {
            background: rgba(#f56c6c, 0.1) !important;
            border-color: #f56c6c !important;
            color: #f56c6c !important;
          }
        }
      }
    }
  }
}
